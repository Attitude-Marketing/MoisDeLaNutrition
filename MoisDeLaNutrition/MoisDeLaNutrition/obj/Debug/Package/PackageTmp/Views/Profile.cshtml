@inherits Umbraco.Web.Mvc.UmbracoTemplatePage
@using ContentModels = Umbraco.Web.PublishedContentModels;
@{
    Layout = "_Master.cshtml";
    var pageNode = Model.Content;
    var bannerImg = pageNode.GetPropertyValue<IPublishedContent>("bannerImage");
    var bannerImgUrl = "";
    var recipes = pageNode.GetPropertyValue<IEnumerable<IPublishedContent>>("recipes");
    var recipeCounter = 1;

    if (bannerImg != null)
    {
        bannerImgUrl = bannerImg.Url;
    }
}
<section id="profile" class="@(pageNode.UrlName)">
    <div class="fluid">
        <div class="banner" style="background: url(@bannerImgUrl) top center no-repeat;">
            <div class="row no-gutters">
                <div class="col-sm-10 offset-sm-1">
                    <div id="bannerInfo">
                        <h1 id="header-title" class="htitle">@(pageNode.GetPropertyValue<string>("pageTitle"))</h1>
                        <div id="introText">@(pageNode.GetPropertyValue<HtmlString>("pageText"))</div>
                    </div>
                </div>
            </div>
        </div>
        <div id="recipes">
            <div class="row no-gutters">
                <div class="col-sm-9 offset-sm-2">
                    <div class="wrapper">
                        @foreach(var recipe in recipes)
                        {
                            var stepCounter = 1;
                            var recipic = recipe.GetPropertyValue<IPublishedContent>("recipeImage");
                            var recipicUrl = "";

                            if(recipic != null)
                            {
                                recipicUrl = recipic.Url;
                            }

                            <div class="recipe">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <div class="recipeContentLeft">
                                            <p class="recipeStatement">@Html.Raw(recipe.GetPropertyValue<string>("recipeStatement"))</p>
                                            <h3 class="recipeName">@(recipe.GetPropertyValue<string>("recipeName"))</h3>
                                            <p class="info">@(Umbraco.Field("#Preparation")) @(recipe.GetPropertyValue<string>("preparation")) / @(Umbraco.Field("#Cooking")) @(recipe.GetPropertyValue<string>("cooking"))</p>
                                            <p class="info">@(Umbraco.Field("#Serving")) @(recipe.GetPropertyValue<string>("serving")) </p>
                                            <ul class="preparationSteps">
                                                @foreach(var step in recipe.GetPropertyValue<IEnumerable<IPublishedContent>>("preparationSteps"))
                                                {
                                                    <li>
                                                        <span class="ellipse">@stepCounter</span>
                                                        <div class="step">@(step.GetPropertyValue<HtmlString>("step"))</div>
                                                    </li>

                                                    stepCounter++;
                                                }
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="recipeContentRight">
                                            @if(recipeCounter == 1)
                                            {
                                                <div id="printAndShare">
                                                    <button id="print">
                                                        <span>@(Umbraco.Field("#Print"))</span>
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="20.291" viewBox="0 0 22 20.291"><g transform="translate(0 -9.633)"><path class="a" d="M20.448,14.322H17.984V10.3a.665.665,0,0,0-.665-.665H4.681a.665.665,0,0,0-.665.665v4.023H1.552A1.554,1.554,0,0,0,0,15.874v8.534A1.554,1.554,0,0,0,1.552,25.96H4.016v3.3a.665.665,0,0,0,.665.665H17.319a.665.665,0,0,0,.665-.665v-3.3h2.464A1.554,1.554,0,0,0,22,24.408V15.874A1.554,1.554,0,0,0,20.448,14.322Zm-15.1-3.358H16.653v3.358H5.347ZM16.653,28.594H5.347V22H16.653Zm4.016-4.186a.225.225,0,0,1-.222.222H17.984v-3.3a.665.665,0,0,0-.665-.665H4.681a.665.665,0,0,0-.665.665v3.3H1.552a.225.225,0,0,1-.222-.222V15.874a.225.225,0,0,1,.222-.222h18.9a.225.225,0,0,1,.222.222v8.534Z" transform="translate(0 0)" /><circle class="a" cx="0.967" cy="0.967" r="0.967" transform="translate(16.339 17.195)" /><path class="a" d="M89.27,163.822H83.087a.68.68,0,0,0,0,1.359H89.27a.68.68,0,0,0,0-1.359Z" transform="translate(-75.178 -140.535)" /><path class="a" d="M89.27,193.623H83.087a.68.68,0,0,0,0,1.359H89.27a.68.68,0,0,0,0-1.359Z" transform="translate(-75.178 -167.758)" /></g></svg>
                                                    </button>
                                                    <button id="share">
                                                        <span>@(Umbraco.Field("#Share"))</span>
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="19.827" height="20" viewBox="0 0 19.827 20"><path class="a" d="M88.316,1612.711a3.609,3.609,0,0,0-2.844,1.4l-6.192-3.165a3.617,3.617,0,0,0,.138-.942,3.511,3.511,0,0,0-.164-1.022l6.16-3.152a3.846,3.846,0,1,0-.6-1.24l-6.187,3.165a3.645,3.645,0,1,0,.053,4.426l6.16,3.152a3.57,3.57,0,0,0-.168,1.026,3.644,3.644,0,1,0,3.644-3.644Z" transform="translate(-72.134 -1600)" /></svg>
                                                    </button>
                                                </div>
                                            }
                                            <img class="recipeImage" src="@recipicUrl" alt="@(recipe.GetPropertyValue<string>("recipeName"))" />
                                            <div class="ingredientsWrap">
                                                <h4 class="ingredientsTitle">@(Umbraco.Field("#Ingredients"))</h4>
                                                <ul class="ingredients">
                                                    @foreach(var ingredient in recipe.GetPropertyValue<IEnumerable<IPublishedContent>>("ingredients"))
                                                    {
                                                        <li>@(ingredient.GetPropertyValue<string>("ingredient"))</li>
                                                    }
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            recipeCounter++;
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>